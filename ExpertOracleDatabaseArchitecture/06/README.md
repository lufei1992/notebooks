# 06 锁和闩
>
## 06.1 什么是锁
>
### 锁(lock)用于管理对共享资源的并发访问
>
- 所有的数据库本质上都有所不同。
- 在学习每一个新数据库时，必须假设自己从未使用过任何数据库。
>
### 在Oracle中，你需要了解下面几点
>
- 01 事务是数据库的核心。
- 02 在必要时才提交，不要提前。
- 03 只要需要，就应该尽可能长时间地保持对数据所加的锁。
- 04 在Oracle中，行级锁没有相关的开销，一点都没有。
- 05 在Oracle中，锁升级对系统没有任何好处。
- 06 可以同时得到并发性和一致性。
>
## 06.2 锁的问题
>
### 丢失更新
>
- 丢失更新(lost update)是一个经典的数据库问题。
>
### 悲观锁
>
- 悲观锁(pessimistic locking)在用户修改数值之前就开始生效了。
- 悲观锁仅适用于**有状态**(stateful)或**有连接**(connected)环境。也就是说，你的应用于数据库之间有一个持续的连接，而且只有你一个人在使用这条连接。
>
### 乐观锁
>
- 乐观锁(optimistic locking)，即把所有锁定动作都延迟到即将执行更新之前才进行。
#### 1 使用版本列的乐观锁
#### 2 使用总和校验的乐观锁
>
### 乐观锁还是悲观锁
>
- 悲观锁在Oracle中工作得非常好，不过，它需要一个到数据库的有状态连接，因此无法跨连接持有锁。
- 对大多数应用来说，建议采用乐观并发控制。
